database : lwos
database connection name : lwosdb
password : qaium29


CREATE TABLE userinfo
(
user_id int not null,
user_role varchar2 (20),
full_name varchar2 (20) not null,
user_name varchar2 (20) not null,
email varchar2 (20) not null,
mobile VARCHAR2(20) not null,
dob date not null ,
gender varchar2 (10) not null,
address varchar2(50) not null,
country varchar2 (30) not null ,
city varchar2(20),
pass varchar2(20) not null,
pro_pic VARCHAR2(500),
CONSTRAINT userinfo_pk primary key(user_id)
)

create SEQUENCE user_id
MINVALUE 1
START WITH 1
INCREMENT BY 1 ;



CREATE TABLE post_tab
(
post_id int not null,
post varchar2 (500),
post_type varchar2 (20),
CATEGORIES varchar2 (20),
post_headline varchar2 (1000),
date_time varchar2 (100),
user_id int,
CONSTRAINT data_tab_pk primary key (post_id),
CONSTRAINT fk_user_id foreign key (user_id)
references userinfo(user_id)
)


CREATE TABLE comment_tab
(
comment_id int not null,
comment_content varchar2 (500),
comment_post_type varchar2 (20),
user_id int,
post_id int,
time_date varchar2 (100),
CONSTRAINT comment_tab_pk primary key (comment_id)
)

ALTER TABLE comment_tab
ADD CONSTRAINT post_tab
foreign key (post_id)
references post_tab(post_id)

ALTER TABLE comment_tab
ADD CONSTRAINT userinfo
foreign key (user_id)
references userinfo(user_id)


create SEQUENCE post_id
MINVALUE 1
START WITH 1
INCREMENT BY 1 
CACHE 10 ;

create table feedback
(
serial_no int not null,
agree_notagree varchar2 (20),
post_id int,
user_id int ,
CONSTRAINT feedback_pk primary key (serial_no),
CONSTRAINT fk_post_tab foreign key (post_id)
references post_tab (post_id)
)


create SEQUENCE serial_no
MINVALUE 1
START WITH 1
INCREMENT BY 1 
CACHE 10 ;


ALTER TABLE feedback
ADD CONSTRAINT fk_userinfo
foreign key (user_id)
references userinfo(user_id)



CREATE OR REPLACE TRIGGER timeupdate BEFORE INSERT ON comment_tab 
FOR EACH ROW
BEGIN
INSERT INTO comment_tab(TIME_DATE) 
VALUES (SYSDATE,'yy-mm-dd hh-ms-ss');
END;


create or replace TRIGGER timeupdate AFTER  INSERT ON COMMENT_TAB 
FOR EACH ROW
DECLARE
VA VARCHAR2 (60);
BEGIN
VA:=TO_CHAR(SYSDATE,'yy-mm-dd:hh:mm');
UPDATE COMMENT_TAB SET TIME_DATE= VA ;
END;


create or replace TRIGGER timeupdate AFTER  INSERT ON COMMENT_TAB 
FOR EACH ROW
DECLARE
VA VARCHAR2 (60);
BEGIN
VA:=TO_CHAR(SYSDATE,'yy-mm-dd:hh:mm');
UPDATE COMMENT_TAB SET TIME_DATE= VA ;
END;



UPDATE post_tab
SET post = NULL;
tar por
ALTER TABLE post_tab
  MODIFY post LONG;




Trigger for notification
==============================
create or replace TRIGGER TRG_send_notification
  BEFORE INSERT ON POST_TAB
  FOR EACH ROW

  begin
  begin
  insert into notification (NOTIFICATION_ID,FOLLOWER_ID,FOLLOWING_ID,NOTIFICATION_MES,IS_NEW_FLAG,TIME_DATE)
  select seq_notification.nextval,a.FOLLOWER_USER_ID,a.FOLLOWING_USER_ID, :new.post_headline,1, to_char(sysdate,'dd/mm/yyyy HH:MI:ss')
  from follow a ,userinfo c
  where c.user_id=a.following_user_id
  and a.FOLLOWING_USER_ID = :new.user_id ;
  exception
  when others then
dbms_output.put_line(sqlerrm) ;
  null ;
  end ;
  end ;










Combo Date
=====================

  <!--
    <select  name="day">
                        <?php
                        if ($day == "")
                        {
                            echo "<option value=''>Select Day</option>";
                            for ($i = 1; $i<=31; $i++)
                            {
                                echo "<option value='".$i."'>".$i."</option>";
                                
                            }
                        }
                        else
                        {
                            echo "<option value='".$day."'>".$day."</option>";
                        }
                        ?>
                        </select>
                        <select name="month">
                        <?php
                        if ($month == "")
                        {
                            echo "<option value=''>Select Month</option>";
                            
                                echo "<option value=''>Jan</option>";
                                 echo "<option value=''>Feb</option>";
                                  echo "<option value=''>Mar</option>";
                                   echo "<option value=''>Apr</option>";
                                    echo "<option value=''>May</option>";
                                     echo "<option value=''>Jun</option>";
                                      echo "<option value=''>July</option>";
                                       echo "<option value=''>Agu</option>";
                                        echo "<option value=''>Sep</option>";
                                         echo "<option value=''>Oct</option>";
                                          echo "<option value=''>Nov</option>";
                                           echo "<option value=''>Dec</option>";
                            
                        }
                        else
                        {
                            echo "<option value='".$month."'>".$month."</option>";
                        }
                        ?>
                        </select>
                        <select  name="year">
                        <?php
                        if ($year == "")
                        {
                            echo "<option value=''>Select Year</option>";
                            for ($i = 1900; $i<=2016; $i++)
                            {
                                echo "<option value='".$i."'>".$i."</option>";
                            }
                        }
                        else
                        {
                            echo "<option value='".$year."'>".$year."</option>";
                        }
                        ?>
                        </select>

                        -->
=====================================